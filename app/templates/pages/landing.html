{% extends "layouts/base.html" %}

{% block content %}
{% set tr = i18n if i18n is defined else {} %}
<!-- Hero Section -->
<section class="relative pt-32 pb-20 overflow-hidden">
    <!-- Background Glow -->
    <div
        class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-[500px] bg-gradient-to-b from-indigo-500/10 via-emerald-500/5 to-transparent blur-3xl -z-10 pointer-events-none">
    </div>

    <div class="container mx-auto px-4 text-center">
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-800/50 border border-slate-700/50 text-indigo-400 text-xs font-semibold uppercase tracking-wider mb-6 animate-fade-in"
            style="animation-delay: 0.1s;">
            <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
            {{ tr.get('landing_badge', 'AI Visibility Engine') }}
        </div>

        <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight mb-6 animate-fade-in"
            style="animation-delay: 0.2s;">
            {{ tr.get('landing_hero_title_line1', 'Make Your Website') }} <br>
            <span class="gradient-text">{{ tr.get('landing_hero_title_highlight', 'Visible to AI Agents') }}</span>
        </h1>

        <p class="text-xl text-slate-400 max-w-2xl mx-auto mb-10 animate-fade-in" style="animation-delay: 0.3s;">
            {{ tr.get('landing_hero_desc_intro', 'Inject dynamic JSON-LD and') }} <code
                class="text-indigo-400 bg-slate-800 px-1 py-0.5 rounded text-sm">llms.txt</code> <br>
            {{ tr.get('landing_hero_desc_outro', 'Boost your visibility on ChatGPT, Gemini, and Claude.') }}
        </p>

        <!-- Interactive Demo Input -->
        <div class="max-w-xl mx-auto animate-fade-in" style="animation-delay: 0.4s;">
            <form class="relative group" action="/dashboard" method="get">
                <div
                    class="absolute -inset-1 bg-gradient-to-r from-emerald-500 to-indigo-500 rounded-lg blur opacity-25 group-hover:opacity-50 transition duration-200">
                </div>
                <div class="relative flex">
                    <input type="url" name="url"
                        placeholder="{{ tr.get('landing_url_placeholder', 'Enter your website URL...') }}"
                        class="w-full bg-slate-900 text-white border border-slate-700 rounded-l-lg px-5 py-4 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all placeholder-slate-500"
                        required>
                    <button type="submit"
                        class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-4 rounded-r-lg font-medium transition-colors border-t border-b border-r border-indigo-600 hover:border-indigo-500">
                        {{ tr.get('landing_check_score', 'Check Score') }}
                    </button>
                </div>
            </form>
            <p class="text-sm text-slate-500 mt-3">{{ tr.get('landing_try_free', 'Try it free. No credit card
                required.') }}</p>
        </div>
    </div>
</section>

<!-- Features Section (Detailed Showcase with Images) -->
<section id="features" class="py-24 bg-slate-900 relative overflow-hidden">
    <div class="container mx-auto px-4">
        <!-- Header -->
        <div class="text-center max-w-3xl mx-auto mb-24">
            <h2 class="text-3xl md:text-5xl font-extrabold tracking-tight mb-8">
                {{ tr.get('landing_features_title_prefix', 'Built for the') }} <span
                    class="bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-indigo-400">{{
                    tr.get('landing_features_title_highlight', 'AI Era') }}</span>
            </h2>
            <p class="text-xl text-slate-400 leading-relaxed">
                {{ tr.get('landing_features_desc', 'GhostLink provides the essential infrastructure to make your content
                visible, understandable, and accessible to AI agents and LLMs.') }}
            </p>
        </div>

        <div class="flex flex-col gap-24">

            <!-- Feature 1: JSON-LD (Full Width) -->
            <div
                class="glass rounded-3xl p-8 md:p-12 border border-slate-700/50 hover:border-emerald-500/30 transition-all group lg:grid lg:grid-cols-5 lg:gap-16 items-center">
                <div class="order-2 lg:order-1 lg:col-span-3">
                    <div
                        class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 text-xs font-semibold uppercase tracking-wider mb-6">
                        {{ tr.get('landing_feature_jsonld_badge', 'Core Infrastructure') }}
                    </div>
                    <h3 class="text-3xl font-bold text-white mb-6">{{ tr.get('landing_feature_jsonld_title', 'Instant
                        JSON-LD Injection') }}</h3>
                    <p class="text-slate-300 text-lg leading-relaxed mb-8">
                        {{ tr.get('landing_feature_jsonld_detail', 'Our engine crawls your site, analyzes content
                        structure, and automatically injects Schema.org compliant JSON-LD structured data. This
                        perfectly formatted metadata allows search engines and AI models to unambiguously understand
                        your site entities.') }}
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-start gap-3">
                            <span
                                class="mt-1 w-5 h-5 rounded-full bg-emerald-500/20 text-emerald-400 flex items-center justify-center text-xs">✓</span>
                            <span class="text-slate-400"><strong>Zero-Code Integration</strong>: Works with any
                                framework or CMS.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span
                                class="mt-1 w-5 h-5 rounded-full bg-emerald-500/20 text-emerald-400 flex items-center justify-center text-xs">✓</span>
                            <span class="text-slate-400"><strong>Google Rich Results</strong>: Fully compatible and
                                validatable.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span
                                class="mt-1 w-5 h-5 rounded-full bg-emerald-500/20 text-emerald-400 flex items-center justify-center text-xs">✓</span>
                            <span class="text-slate-400"><strong>Dynamic Updates</strong>: Changes reflect instantly
                                without manual edits.</span>
                        </li>
                    </ul>
                </div>
                <div class="order-1 lg:order-2 lg:col-span-2 mb-8 lg:mb-0 flex justify-center">
                    <div class="relative group-hover:scale-[1.02] transition-transform duration-500 max-w-sm">
                        <div
                            class="absolute -inset-1 bg-gradient-to-r from-emerald-500 to-indigo-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-500">
                        </div>
                        <img src="/static/images/feature_jsonld.png" alt="JSON-LD Structured Data Illustration"
                            class="relative rounded-2xl shadow-2xl border border-slate-700/50 w-full object-cover">
                    </div>
                </div>
            </div>

            <!-- Feature 2: llms.txt (Full Width) -->
            <div
                class="glass rounded-3xl p-8 md:p-12 border border-slate-700/50 hover:border-indigo-500/30 transition-all group lg:grid lg:grid-cols-5 lg:gap-16 items-center">
                <div class="mb-8 lg:mb-0 lg:col-span-2 flex justify-center">
                    <div class="relative group-hover:scale-[1.02] transition-transform duration-500 max-w-sm">
                        <div
                            class="absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-500">
                        </div>
                        <img src="/static/images/feature_llms.png" alt="llms.txt Standard Illustration"
                            class="relative rounded-2xl shadow-2xl border border-slate-700/50 w-full object-cover">
                    </div>
                </div>
                <div class="lg:col-span-3">
                    <div
                        class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-500/10 text-indigo-400 text-xs font-semibold uppercase tracking-wider mb-6">
                        {{ tr.get('landing_feature_llms_badge', 'New Standard') }}
                    </div>
                    <h3 class="text-3xl font-bold text-white mb-6">{{ tr.get('landing_feature_llms_title', 'Automated
                        /llms.txt') }}</h3>
                    <p class="text-slate-300 text-lg leading-relaxed mb-8">
                        {{ tr.get('landing_feature_llms_detail', 'The /llms.txt standard is the new robots.txt for the
                        AI era. We automatically generate a condensed, markdown-formatted version of your site
                        specifically optimized for the limited context windows of LLMs.') }}
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-start gap-3">
                            <span
                                class="mt-1 w-5 h-5 rounded-full bg-indigo-500/20 text-indigo-400 flex items-center justify-center text-xs">✓</span>
                            <span class="text-slate-400"><strong>Token Optimization</strong>: Condensed content saves
                                tokens and costs.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span
                                class="mt-1 w-5 h-5 rounded-full bg-indigo-500/20 text-indigo-400 flex items-center justify-center text-xs">✓</span>
                            <span class="text-slate-400"><strong>Hallucination Reduction</strong>: Provides clear,
                                factual context to models.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span
                                class="mt-1 w-5 h-5 rounded-full bg-indigo-500/20 text-indigo-400 flex items-center justify-center text-xs">✓</span>
                            <span class="text-slate-400"><strong>Crawler Preferred</strong>: Prioritized by Anthropic,
                                OpenAI, and Google crawlers.</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Deep Dive Row: Analytics & Proof -->
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Analytics -->
                <div
                    class="glass rounded-3xl p-8 border border-slate-700/50 hover:border-blue-500/30 transition-all group flex flex-col">
                    <div class="mb-6">
                        <div
                            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/10 text-blue-400 text-xs font-semibold uppercase tracking-wider mb-4">
                            {{ tr.get('landing_feature_analytics_badge', 'Intelligence') }}
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-4">{{ tr.get('landing_feature_analytics_title', 'Bot
                            Analytics') }}</h3>
                        <p class="text-slate-400 leading-relaxed mb-6">
                            {{ tr.get('landing_feature_analytics_detail', 'Traditional analytics lump AI bots with
                            direct traffic. We distinguish legitimate AI crawlers (GPTBot, ClaudeBot) from scrapers and
                            humans, giving you a "Visibility Score" to track your AI presence.') }}
                        </p>
                    </div>
                    <div
                        class="mt-auto relative rounded-2xl overflow-hidden group-hover:scale-[1.02] transition-transform duration-500 w-3/4 mx-auto">
                        <div
                            class="absolute -inset-1 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-500">
                        </div>
                        <img src="/static/images/feature_analytics.png" alt="Bot Analytics Dashboard Illustration"
                            class="relative rounded-xl border border-slate-700/50 w-full object-cover shadow-2xl">
                    </div>
                </div>

                <!-- Proof Center -->
                <div
                    class="glass rounded-3xl p-8 border border-slate-700/50 hover:border-amber-500/30 transition-all group flex flex-col">
                    <div class="mb-6">
                        <div
                            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-amber-500/10 text-amber-400 text-xs font-semibold uppercase tracking-wider mb-4">
                            {{ tr.get('landing_feature_proof_badge', 'Verification') }}
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-4">{{ tr.get('landing_feature_proof_title', 'Proof
                            Center') }}</h3>
                        <p class="text-slate-400 leading-relaxed mb-6">
                            {{ tr.get('landing_feature_proof_detail', 'Verify that your optimizations are actually
                            working. The Proof Center maintains an immutable log of every time an AI agent accesses your
                            structured data or /llms.txt file.') }}
                        </p>
                    </div>
                    <div
                        class="mt-auto relative rounded-2xl overflow-hidden group-hover:scale-[1.02] transition-transform duration-500 w-3/4 mx-auto">
                        <div
                            class="absolute -inset-1 bg-gradient-to-r from-amber-500 to-emerald-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-500">
                        </div>
                        <img src="/static/images/feature_proof.png" alt="Proof Center Illustration"
                            class="relative rounded-xl border border-slate-700/50 w-full object-cover shadow-2xl">
                    </div>
                </div>
            </div>

            <!-- Feature 5: Reports (Full Width Banner) -->
            <div
                class="glass rounded-3xl p-8 md:p-12 border border-slate-700/50 hover:border-purple-500/30 transition-all group relative overflow-hidden">
                <div
                    class="absolute -right-20 -bottom-20 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl pointer-events-none">
                </div>

                <div class="lg:flex items-center gap-12 relative z-10">
                    <div class="flex-1">
                        <div
                            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-purple-500/10 text-purple-400 text-xs font-semibold uppercase tracking-wider mb-6">
                            {{ tr.get('landing_feature_reports_badge', 'Proactive Monitoring') }}
                        </div>
                        <h3 class="text-3xl font-bold text-white mb-6">{{ tr.get('landing_feature_reports_title', 'Daily
                            Visibility Reports') }}</h3>
                        <p class="text-slate-300 text-lg leading-relaxed mb-6">
                            {{ tr.get('landing_feature_reports_detail', 'Don\'t log in every day to check stats. We
                            monitor your site 24/7 and send a daily digest summarizing AI traffic trends, new agent
                            discoveries, and visibility improvements directly to your inbox.') }}
                        </p>
                        <div class="flex flex-wrap gap-4 text-sm text-slate-400">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4 text-purple-400" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                </svg>
                                Trend Analysis
                            </div>
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4 text-purple-400" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                                    </path>
                                </svg>
                                Scraper Alerts
                            </div>
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4 text-purple-400" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Actionable Insights
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 lg:mt-0 lg:w-1/4 flex justify-center">
                        <div class="relative group-hover:scale-[1.02] transition-transform duration-500 max-w-xs">
                            <div
                                class="absolute -inset-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-500">
                            </div>
                            <img src="/static/images/feature_reports.png" alt="Daily Reports Illustration"
                                class="relative rounded-2xl shadow-2xl border border-slate-700/50 w-full object-cover">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<style>
    @keyframes scroll {
        0% {
            transform: translateX(0);
        }

        100% {
            transform: translateX(-50%);
        }
    }

    .animate-scroll {
        animation: scroll 40s linear infinite;
    }

    .animate-scroll:hover {
        animation-play-state: paused;
    }
</style>

<section id="testimonials" class="py-20 bg-slate-950 overflow-hidden relative">
    <!-- Decorational Blobs -->
    <div
        class="absolute top-0 left-0 w-96 h-96 bg-indigo-600/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 pointer-events-none">
    </div>
    <div
        class="absolute bottom-0 right-0 w-96 h-96 bg-emerald-600/10 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 pointer-events-none">
    </div>

    <div class="container mx-auto px-4 mb-12 relative z-10">
        <h2 class="text-3xl font-bold text-center text-white mb-4">{{ tr.get('landing_testimonials_title', 'Trusted by
            Developers & SEO Experts') }}</h2>
        <p class="text-slate-400 text-center max-w-2xl mx-auto">{{ tr.get('landing_testimonials_subtitle', 'Join
            hundreds of teams using GhostLink to dominate AI search results.') }}</p>
    </div>

    {% set testimonials = [
    {
    'name': 'Alex Chen',
    'role': 'Fullstack Developer',
    'role_color': 'text-cyan-400',
    'quote': 'llms.txt support is a game changer. Documentation is now perfectly indexed.',
    'seed': 'Alex'
    },
    {
    'name': 'Sarah Miller',
    'role': 'Tech Blogger',
    'role_color': 'text-emerald-400',
    'quote': 'JSON-LD injection is instant. Results appeared in AI snapshots within days.',
    'seed': 'Sarah'
    },
    {
    'name': 'Marcus Webb',
    'role': 'Startup Founder',
    'role_color': 'text-indigo-400',
    'quote': 'Reclaimed visibility from AI answers. The analytics dashboard is insightful.',
    'seed': 'Marcus'
    },
    {
    'name': 'Elena Rodriguez',
    'role': 'SEO Specialist',
    'role_color': 'text-rose-400',
    'quote': 'The analytics for AI bots are something I haven\'t seen elsewhere. Crucial for 2026 SEO.',
    'seed': 'Elena'
    },
    {
    'name': 'David Kim',
    'role': 'SaaS CTO',
    'role_color': 'text-amber-400',
    'quote': 'Integration took 5 minutes. Verification is smooth and reports keep us in the loop.',
    'seed': 'David'
    },
    {
    'name': 'Jessica Lee',
    'role': 'Content Creator',
    'role_color': 'text-violet-400',
    'quote': 'Finally, I know how often my content is being scraped. GhostLink gives me back control.',
    'seed': 'Jessica'
    },
    {
    'name': 'Michael Chang',
    'role': 'Indie Hacker',
    'role_color': 'text-blue-400',
    'quote': 'Building for the AI web is hard, but GhostLink makes the discovery part effortless.',
    'seed': 'Michael'
    },
    {
    'name': 'Priya Patel',
    'role': 'Growth Lead',
    'role_color': 'text-fuchsia-400',
    'quote': 'Our traffic from AI citations increased by 300% after using GhostLink\'s optimization tools.',
    'seed': 'Priya'
    }
    ] %}

    <div class="relative w-full z-10">
        <!-- Gradient Masks -->
        <div
            class="absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-slate-950 to-transparent z-10 pointer-events-none">
        </div>
        <div
            class="absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-slate-950 to-transparent z-10 pointer-events-none">
        </div>

        <!-- Scrolling Track -->
        <div class="flex animate-scroll w-fit">
            <!-- First Loop -->
            <div class="flex gap-6 px-3">
                {% for t in testimonials %}
                <div
                    class="w-[350px] shrink-0 glass p-6 rounded-2xl border border-slate-700/50 hover:border-slate-500/50 transition-colors">
                    <div class="flex items-center gap-4 mb-4">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed={{ t.seed }}" alt="{{ t.name }}"
                            class="w-10 h-10 rounded-full bg-slate-800">
                        <div>
                            <div class="font-bold text-white text-sm">{{ t.name }}</div>
                            <div class="text-xs font-mono {{ t.role_color }}">{{ t.role }}</div>
                        </div>
                    </div>
                    <p class="text-slate-300 text-sm leading-relaxed mb-4">"{{ t.quote }}"</p>
                    <div class="flex text-emerald-500 gap-0.5">
                        {% for i in range(5) %}
                        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Second Loop (Duplicate) -->
            <div class="flex gap-6 px-3">
                {% for t in testimonials %}
                <div
                    class="w-[350px] shrink-0 glass p-6 rounded-2xl border border-slate-700/50 hover:border-slate-500/50 transition-colors">
                    <div class="flex items-center gap-4 mb-4">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed={{ t.seed }}" alt="{{ t.name }}"
                            class="w-10 h-10 rounded-full bg-slate-800">
                        <div>
                            <div class="font-bold text-white text-sm">{{ t.name }}</div>
                            <div class="text-xs font-mono {{ t.role_color }}">{{ t.role }}</div>
                        </div>
                    </div>
                    <p class="text-slate-300 text-sm leading-relaxed mb-4">"{{ t.quote }}"</p>
                    <div class="flex text-emerald-500 gap-0.5">
                        {% for i in range(5) %}
                        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<section id="pricing" class="py-20 bg-slate-900 relative">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-6">{{ tr.get('landing_pricing_title', 'Simple, Transparent
            Pricing') }}</h2>

        <!-- Toggle Switch -->
        <div class="flex justify-center items-center gap-4 mb-16">
            <span class="text-slate-400 text-sm font-medium">{{ tr.get('landing_pricing_monthly', 'Monthly') }}</span>
            <button id="billing-toggle"
                class="w-14 h-8 rounded-full bg-slate-700 relative transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-slate-900"
                aria-pressed="false">
                <span
                    class="absolute left-1 top-1 w-6 h-6 rounded-full bg-white transition-transform duration-200 transform translate-x-0"></span>
            </button>
            <span class="text-slate-100 text-sm font-medium">{{ tr.get('landing_pricing_yearly', 'Yearly') }} <span
                    class="text-emerald-400 text-xs ml-1">(-20%)</span></span>
        </div>

        <div class="grid md:grid-cols-4 gap-6 max-w-7xl mx-auto">
            {% for plan in plans %}
            <div
                class="glass rounded-2xl p-6 hover:border-slate-600 transition-all flex flex-col relative {% if plan.is_popular %}border-indigo-500/50{% endif %}">
                {% if plan.is_popular %}
                <div
                    class="absolute top-0 right-0 bg-indigo-500 text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg">
                    {{ tr.get('landing_plan_popular', 'POPULAR') }}
                </div>
                {% endif %}

                <h3
                    class="text-xl font-bold mb-2 {% if plan.is_popular %}text-indigo-400{% else %}text-white{% endif %}">
                    {{ plan.name }}</h3>
                <p class="text-slate-400 text-sm mb-6 min-h-[40px]">{{ plan.description }}</p>

                <div class="mb-6">
                    {% if plan.code == 'enterprise' or plan.price_monthly == 0 and plan.code != 'free' %}
                    <div class="text-3xl font-bold">Custom</div>
                    {% elif plan.code == 'free' %}
                    <div class="text-4xl font-bold">$0<span class="text-lg text-slate-500 font-normal">/mo</span></div>
                    {% else %}
                    <div class="text-4xl font-bold price-display" data-monthly="${{ (plan.price_monthly / 100)|int }}"
                        data-yearly="${{ (plan.price_yearly / 100)|int }}">
                        ${{ (plan.price_monthly / 100)|int }}<span class="text-lg text-slate-500 font-normal">/mo</span>
                    </div>
                    <div class="text-xs text-slate-500 mt-1 h-4 billing-cycle-text"></div>
                    {% endif %}
                </div>

                <ul class="space-y-3 mb-8 text-slate-300 text-sm flex-grow">
                    {% for feature in plan.features %}
                    {% if feature.included %}
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 text-emerald-500 flex-shrink-0" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">
                            </path>
                        </svg>
                        <span>{{ feature.name }}</span>
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>

                <button onclick="handleSubscribe('{{ plan.code }}')" class="block w-full text-center py-2.5 rounded-lg transition-colors font-medium
                    {% if plan.is_popular %}
                        bg-indigo-600 hover:bg-indigo-500 text-white
                    {% elif plan.code == 'enterprise' %}
                        border border-slate-700 hover:bg-slate-800 text-white
                    {% else %}
                        border border-slate-700 hover:bg-slate-800 text-white
                    {% endif %}">
                    {% if plan.code == 'enterprise' %}
                    {{ tr.get('landing_plan_contact', 'Contact Sales') }}
                    {% elif plan.code == 'free' %}
                    {{ tr.get('landing_plan_start_free', 'Start for Free') }}
                    {% else %}
                    {{ tr.get('landing_plan_subscribe', 'Subscribe') }}
                    {% endif %}
                </button>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<script>
    let isYearly = false;

    // Toggle Switch Logic
    const toggleBtn = document.getElementById('billing-toggle');
    const toggleCircle = toggleBtn.querySelector('span');
    const priceDisplays = document.querySelectorAll('.price-display');
    const cycleTexts = document.querySelectorAll('.billing-cycle-text');

    toggleBtn.addEventListener('click', () => {
        isYearly = !isYearly;
        toggleBtn.setAttribute('aria-pressed', isYearly);

        // Update Toggle Visuals
        if (isYearly) {
            toggleBtn.classList.remove('bg-slate-700');
            toggleBtn.classList.add('bg-indigo-600');
            toggleCircle.classList.remove('translate-x-0');
            toggleCircle.classList.add('translate-x-6');
        } else {
            toggleBtn.classList.add('bg-slate-700');
            toggleBtn.classList.remove('bg-indigo-600');
            toggleCircle.classList.add('translate-x-0');
            toggleCircle.classList.remove('translate-x-6');
        }

        // Update Prices
        priceDisplays.forEach((el, index) => {
            if (isYearly) {
                el.innerHTML = el.dataset.yearly + '<span class="text-lg text-slate-500 font-normal">/mo</span>';
                if (cycleTexts[index]) cycleTexts[index].innerText = 'Billed yearly';
            } else {
                el.innerHTML = el.dataset.monthly + '<span class="text-lg text-slate-500 font-normal">/mo</span>';
                if (cycleTexts[index]) cycleTexts[index].innerText = '';
            }
        });
    });

    // Checkout Logic
    async function handleSubscribe(planCode) {
        // Check if user is logged in (naive check via template variable or cookie, strictly backend redirects)
        // Here we try to post, if 401 we redirect to login

        const interval = isYearly ? 'year' : 'month';

        // If enterprise, just redirect to contact or dashboard for now
        if (planCode === 'enterprise') {
            window.location.href = 'mailto:sales@ghostlink.io';
            return;
        }

        try {
            // We need org_id. On landing page, user might not have org yet.
            // Flow: 
            // 1. If not logged in -> Login -> Dashboard -> specific plan? 
            // 2. If logged in -> Which org? Default to first or ask?
            // For MVP landing page, we redirect to dashboard/billing with query params to let dashboard handle it
            // OR we try to hit the checkout endpoint if we assume cookie session.

            // Better approach for Landing Page:
            // Redirect to /dashboard?plan=...&interval=...
            // The dashboard/onboarding logic should pick this up.

            window.location.href = `/dashboard?plan=${planCode}&interval=${interval}`;

        } catch (error) {
            console.error('Subscription error:', error);
            window.location.href = '/auth/login';
        }
    }
</script>
{% endblock %}